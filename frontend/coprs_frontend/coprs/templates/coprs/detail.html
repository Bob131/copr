{% extends "layout.html" %}
{% from "_helpers.html" import copr_title %}

{% block title %}{{ copr.owner.name }}/{{ copr.name }} Copr{% endblock %}
{% block main_menu_projects %}active{% endblock %}
{% block breadcrumbs %}

<ol class="breadcrumb">
  <li>
    <a href="{{ url_for('coprs_ns.coprs_show') }}">Home</a>
  </li>
  <li>
    {% if copr.is_a_group_project %}
      <a href="{{ url_for('groups_ns.list_projects_by_group', group_name=copr.group.name) }}">
        @{{ copr.group.name }}
      </a>
    {% else %}
      <a href="{{ url_for('coprs_ns.coprs_by_owner', username=copr.owner.name) }}">
        {{ copr.owner.name }}
      </a>
    {% endif %}
  </li>
  <li class="active">
    {% if copr.is_a_group_project %}
      <a href="{{ url_for('coprs_ns.group_copr_detail', group_name=copr.group.name, coprname=copr.name) }}">
        {{ copr.name }}
      </a>
    {% else %}
      <a href="{{ url_for('coprs_ns.copr_detail', username=copr.owner.name, coprname=copr.name) }}">
        {{ copr.name }}
      </a>
    {% endif %}
  </li>
  {%block project_breadcrumb %}
  {%endblock%}
</ol>
{%endblock%}
{% block body %}

<!-- PROJECT NAME -->
<h1 class="project-name">
  {{ copr_title(copr) }}
</h1>

<!-- MENU -->
<ul class="nav nav-tabs">
  <li class="{% block overview_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_detail', username = copr.owner.name, coprname = copr.name) }}">
      Overview
    </a>
  </li>

  <li class="{% block builds_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_builds', username = copr.owner.name, coprname = copr.name) }}">
      Builds
    </a>
  </li>

  <li class="{% block monitor_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_build_monitor', username = copr.owner.name, coprname = copr.name) }}">
      Monitor
    </a>
  </li>

  <li class="{% block permissions_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_permissions', username = copr.owner.name, coprname = copr.name) }}">
      Permissions
    </a>
  </li>

  {% if g.user and g.user.can_build_in(copr) %}
  <li class="{% block new_build_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_add_build', username = copr.owner.name, coprname = copr.name) }}">
      New Build
    </a>
  </li>
  {% endif %}

  {% if g.user and g.user.can_edit(copr) %}
  <li class="{% block edit_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_edit', username = copr.owner.name, coprname = copr.name) }}">
      Edit
    </a>
  </li>
  {% endif %}

  {% if g.user and g.user == copr.owner %}
  <li class="{% block delete_selected %}{% endblock %}">
    <a href="{{ url_for('coprs_ns.copr_delete', username=copr.owner.name, coprname=copr.name) }}">
      Delete
    </a>
  </li>
  {% endif %}
</ul>

{% block detail_body %}{% endblock %}
{% endblock %}
